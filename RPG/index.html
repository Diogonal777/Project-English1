<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—É—Ç—å –°–∞–º—É—Ä–∞—è - –í–∏–∑—É–∞–ª—å–Ω–∞—è –ù–æ–≤–µ–ª–ª–∞</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body class="main-menu">
    <div class="menu-container">
        <div class="title-section">
            <h1 class="game-title">‚öîÔ∏è –ü—É—Ç—å –°–∞–º—É—Ä–∞—è</h1>
            <p class="game-subtitle">–í–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–ª–ª–∞ —Å —Ä–∞–∑–≤–∏—Ç–∏–µ–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</p>
        </div>
        
        <div class="menu-options">
            <button id="new-game" class="menu-btn primary">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button id="load-game" class="menu-btn secondary">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä—É</button>
            <button id="achievements-btn" class="menu-btn secondary">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
            <button id="settings" class="menu-btn tertiary">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
        
        <div class="save-slots hidden" id="save-slots">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:</h3>
            <div class="slot-container">
                <div class="save-slot" data-slot="1">
                    <span class="slot-title">–°–ª–æ—Ç 1</span>
                    <span class="slot-info">–ü—É—Å—Ç–æ</span>
                </div>
                <div class="save-slot" data-slot="2">
                    <span class="slot-title">–°–ª–æ—Ç 2</span>
                    <span class="slot-info">–ü—É—Å—Ç–æ</span>
                </div>
                <div class="save-slot" data-slot="3">
                    <span class="slot-title">–°–ª–æ—Ç 3</span>
                    <span class="slot-info">–ü—É—Å—Ç–æ</span>
                </div>
            </div>
            <button id="back-to-menu" class="menu-btn tertiary">–ù–∞–∑–∞–¥</button>
        </div>

        <div class="achievements-menu hidden" id="achievements-menu">
            <h3>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
            <div class="achievements-grid" id="achievements-grid">
                <!-- Achievements will be loaded here -->
            </div>
            <button id="back-to-menu-achievements" class="menu-btn tertiary">–ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <div class="footer">
        <p>–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π</p>
    </div>

    <script src="js/save-system.js"></script>
    <script>
        document.getElementById('new-game').addEventListener('click', () => {
            window.location.href = 'game.html';
        });

        document.getElementById('load-game').addEventListener('click', () => {
            document.getElementById('save-slots').classList.remove('hidden');
            document.querySelector('.menu-options').classList.add('hidden');
            loadSaveSlots();
        });

        document.getElementById('achievements-btn').addEventListener('click', () => {
            document.getElementById('achievements-menu').classList.remove('hidden');
            document.querySelector('.menu-options').classList.add('hidden');
            loadAchievements();
        });

        document.getElementById('back-to-menu').addEventListener('click', () => {
            document.getElementById('save-slots').classList.add('hidden');
            document.querySelector('.menu-options').classList.remove('hidden');
        });

        document.getElementById('back-to-menu-achievements').addEventListener('click', () => {
            document.getElementById('achievements-menu').classList.add('hidden');
            document.querySelector('.menu-options').classList.remove('hidden');
        });

        function loadSaveSlots() {
            const slots = document.querySelectorAll('.save-slot');
            slots.forEach(slot => {
                const slotNum = slot.getAttribute('data-slot');
                const saveData = SaveSystem.loadGame(slotNum);
                
                if (saveData) {
                    const date = new Date(saveData.timestamp).toLocaleDateString();
                    slot.querySelector('.slot-info').textContent = 
                        `–°—Ü–µ–Ω–∞: ${saveData.currentScene} | ${date}`;
                    slot.classList.add('has-save');
                    
                    slot.addEventListener('click', () => {
                        SaveSystem.loadIntoGame(slotNum);
                        window.location.href = 'game.html';
                    });
                } else {
                    slot.addEventListener('click', () => {
                        alert('–≠—Ç–æ—Ç —Å–ª–æ—Ç –ø—É—Å—Ç!');
                    });
                }
            });
        }

        function loadAchievements() {
            const grid = document.getElementById('achievements-grid');
            const achievements = SaveSystem.getAchievements();
            
            grid.innerHTML = '';
            achievements.forEach(ach => {
                const achievementEl = document.createElement('div');
                achievementEl.className = `achievement ${ach.unlocked ? 'unlocked' : 'locked'}`;
                achievementEl.innerHTML = `
                    <div class="achievement-icon">${ach.unlocked ? 'üèÜ' : 'üîí'}</div>
                    <div class="achievement-info">
                        <h4>${ach.name}</h4>
                        <p>${ach.description}</p>
                        ${ach.unlocked ? `<small>–ü–æ–ª—É—á–µ–Ω–æ: ${new Date(ach.unlockedAt).toLocaleDateString()}</small>` : ''}
                    </div>
                `;
                grid.appendChild(achievementEl);
            });
        }
    </script>
</body>
</html>